# UI Architecture & Stack
*Last Updated: 2026-02-25*

This document details the technical implementation of the Primary Sources UI, including script dependencies, CSS architecture, and the roadmap for the Next.js migration.

## Script Dependencies

| Script | Purpose | Pages |
|--------|---------|-------|
| `components.js` | Loads modular components via `data-component` attribute | All modular pages |
| `nav.js` | Dynamic breadcrumbs + bottom-nav active state | All modular pages |
| `db-logic.js` | Database fetch/render for dynamic content | Data-driven pages |
| `filter.js` | Sidebar filtering logic | List pages (people, events, objects, etc.) |
| `ocr-gui.js` | OCR tool functionality | tools/ocr/ocr-ui.html |
| `global-search.js` | Search functionality | search.html |
| `person-profile.js` | Person detail rendering (card registry) | entities/person/person-details.html |
| `person-cards.js` | Person card components (populate functions) | entities/person/person-details.html |
| `event-profile.js` | Event detail rendering (card registry) | entities/event/event-details.html |
| `event-cards.js` | Event card components (populate functions) | entities/event/event-details.html |
| `organization-profile.js` | Organization detail rendering | entities/organization/org-details.html |
| `organization-cards.js` | Organization card components | entities/organization/org-details.html |
| `place-profile.js` | Place detail rendering | entities/place/place-details.html |
| `place-cards.js` | Place card components | entities/place/place-details.html |
| `object-profile.js` | Object detail rendering | entities/object/object-details.html |
| `object-cards.js` | Object card components | entities/object/object-details.html |
| `source-profile.js` | Source detail rendering | entities/source/source-details.html |
| `source-cards.js` | Source card components | entities/source/source-details.html |

## CSS Architecture

| File | Purpose | Notes |
|------|---------|-------|
| `main.css` | Source file for design system | Input for tailwind-prod.css |
| `tailwind-prod.css` | Compiled CSS with all utilities | Used by all pages |
| `ocr-components.css` | OCR tool styles | Uses CSS variables from main.css |
| `pdf-viewer.css` | PDF viewer styles | Uses CSS variables from main.css |

---

## Next.js Migration Roadmap

### 1. Shared Layout Components
```
components/
├── Layout.tsx              # Wraps all pages
├── Header.tsx              # From header.html
├── Footer.tsx              # From footer.html
├── BottomNav.tsx           # From bottom-nav.html
├── HeroGradient.tsx        # Gradient dark hero variant
├── HeroSimple.tsx          # Simple hero variant
├── FacetBar.tsx            # From facet-bar.html
└── PDFViewerHeader.tsx     # From pdf-viewer-header.html (standalone tool)
```

### 2. Consolidated Tailwind Config
The project uses Tailwind v4 native CSS-first configuration.
```js
// Planned tailwind.config.js for Next.js consistency
module.exports = {
  darkMode: "class",
  theme: {
    extend: {
      colors: {
        primary: "#B08B49",
        "archive-bg": "#2E282A",
        "archive-secondary": "#D4CFC7",
        "archive-heading": "#F0EDE0",
        "archive-dark": "#1A1718",
      },
      fontFamily: {
        display: ["Oswald", "sans-serif"],
        mono: ["Roboto Mono", "monospace"],
      },
    },
  },
}
```

### 3. Page Templates
- **ListPage**: people, events, objects, organizations, places, sources, links
- **DetailPage**: person, event, object, source
- **ToolAppPage**: ocr/index, pdf-viewer (functional tools)

---
*Generated by Antigravity*
