<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pattern Discovery Tool — Primary Sources</title>
    <meta name="description"
        content="Analyzes UNKNOWN classified pages to discover new document type patterns and improve classifier accuracy." />
    <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
    <link
        href="https://fonts.googleapis.com/css2?family=Oswald:wght@400;600;700&family=Roboto+Mono:wght@400;500;700&display=swap"
        rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght,FILL@100..700,0..1&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="../assets/css/main.css">
    <script>
        tailwind.config = {
            darkMode: "class",
            theme: {
                extend: {
                    colors: {
                        "primary": "#B08B49",
                        "archive-bg": "#2E282A",
                        "archive-secondary": "#D4CFC7",
                        "archive-heading": "#F0EDE0",
                        "archive-dark": "#1A1718",
                    },
                    fontFamily: {
                        "display": ["Oswald", "sans-serif"],
                        "mono": ["Roboto Mono", "monospace"]
                    },
                    borderRadius: {
                        "DEFAULT": "0", "lg": "0", "xl": "0", "full": "9999px"
                    },
                },
            },
        }
    </script>
    <script src="/assets/js/components.js"></script>
    <script src="/assets/js/nav.js"></script>
</head>

<body class="bg-archive-bg text-archive-secondary font-mono transition-colors duration-300">

    <!-- MODULAR HEADER -->
    <header data-component="header"
        class="sticky top-0 z-50 w-full border-b border-archive-secondary/20 bg-archive-bg/95 backdrop-blur"></header>

    <!-- HERO -->
    <section class="relative w-full overflow-hidden bg-archive-dark py-12">
        <div
            class="absolute inset-0 bg-gradient-to-br from-primary/5 via-transparent to-transparent pointer-events-none">
        </div>
        <div
            class="absolute bottom-0 left-0 right-0 h-16 bg-gradient-to-t from-archive-bg to-transparent pointer-events-none">
        </div>

        <div class="relative z-10 px-6 flex flex-col items-center text-center">
            <span class="text-[10px] font-bold uppercase text-emerald-400 tracking-widest mb-4 flex items-center gap-2">
                <span class="material-symbols-outlined text-sm">manage_search</span>
                Analytical Tool · Live
            </span>
            <h1 class="mb-4 text-4xl font-bold leading-tight text-archive-heading sm:text-5xl uppercase font-display">
                Pattern Discovery Tool
            </h1>
            <p class="mb-6 max-w-lg text-sm text-archive-secondary/80">
                Analyzes UNKNOWN classified pages to discover recurring patterns and suggest new document types
                for the classifier.
            </p>
            <div class="flex flex-wrap justify-center gap-2">
                <span
                    class="text-[9px] font-bold uppercase tracking-widest bg-emerald-500/20 text-emerald-400 px-3 py-1.5 border border-emerald-500/30">
                    10 Pattern Types
                </span>
                <span
                    class="text-[9px] font-bold uppercase tracking-widest bg-emerald-500/20 text-emerald-400 px-3 py-1.5 border border-emerald-500/30">
                    Bulk Analysis
                </span>
                <span
                    class="text-[9px] font-bold uppercase tracking-widest bg-emerald-500/20 text-emerald-400 px-3 py-1.5 border border-emerald-500/30">
                    Auto-Recommendations
                </span>
            </div>
        </div>
    </section>

    <hr class="border-archive-secondary/20" />

    <!-- MAIN CONTENT -->
    <main class="max-w-4xl mx-auto px-6 py-10">

        <!-- WHAT IT DOES -->
        <section class="mb-12">
            <h2
                class="text-xl font-bold text-archive-heading uppercase tracking-wider border-l-4 border-primary pl-4 mb-6">
                What It Does
            </h2>
            <div class="prose prose-invert max-w-none text-archive-secondary/90 text-sm leading-relaxed space-y-4">
                <p>
                    The Pattern Discovery Tool scans pages classified as UNKNOWN by the Document Layout Analyzer
                    and looks for recurring textual patterns that could indicate new document types. It helps
                    continuously improve classifier accuracy by surfacing patterns the system doesn't yet recognize.
                </p>
                <p>
                    By sampling pages across multiple archival volumes, the tool identifies common markers like
                    "AFFIDAVIT," "DEPOSITION," or "Q. A." patterns that may warrant new fingerprint rules in the
                    classifier.
                </p>
            </div>
        </section>

        <!-- HOW IT WORKS -->
        <section class="mb-12">
            <h2
                class="text-xl font-bold text-archive-heading uppercase tracking-wider border-l-4 border-primary pl-4 mb-6">
                How It Works
            </h2>
            <div class="bg-archive-dark/30 border border-archive-secondary/20 p-6">
                <div class="flex flex-col md:flex-row items-center justify-center gap-4 text-center">
                    <div class="flex flex-col items-center gap-2">
                        <div
                            class="w-16 h-16 flex items-center justify-center bg-archive-secondary/10 border border-archive-secondary/20">
                            <span class="material-symbols-outlined text-2xl text-archive-secondary">library_books</span>
                        </div>
                        <span class="text-[10px] uppercase tracking-wider text-archive-secondary/70">PDF Volumes</span>
                    </div>
                    <span
                        class="material-symbols-outlined text-archive-secondary/30 rotate-90 md:rotate-0">arrow_forward</span>
                    <div class="flex flex-col items-center gap-2">
                        <div
                            class="w-16 h-16 flex items-center justify-center bg-archive-secondary/10 border border-archive-secondary/20">
                            <span class="material-symbols-outlined text-2xl text-archive-secondary">filter_alt</span>
                        </div>
                        <span class="text-[10px] uppercase tracking-wider text-archive-secondary/70">Filter UNKNOWN</span>
                    </div>
                    <span
                        class="material-symbols-outlined text-archive-secondary/30 rotate-90 md:rotate-0">arrow_forward</span>
                    <div class="flex flex-col items-center gap-2">
                        <div class="w-16 h-16 flex items-center justify-center bg-primary/20 border border-primary/40">
                            <span class="material-symbols-outlined text-2xl text-primary">manage_search</span>
                        </div>
                        <span class="text-[10px] uppercase tracking-wider text-primary">Pattern Scan</span>
                    </div>
                    <span
                        class="material-symbols-outlined text-archive-secondary/30 rotate-90 md:rotate-0">arrow_forward</span>
                    <div class="flex flex-col items-center gap-2">
                        <div
                            class="w-16 h-16 flex items-center justify-center bg-emerald-500/20 border border-emerald-500/40">
                            <span class="material-symbols-outlined text-2xl text-emerald-400">lightbulb</span>
                        </div>
                        <span class="text-[10px] uppercase tracking-wider text-emerald-400">Recommendations</span>
                    </div>
                </div>
            </div>
        </section>

        <!-- DETECTED PATTERNS -->
        <section class="mb-12">
            <h2
                class="text-xl font-bold text-archive-heading uppercase tracking-wider border-l-4 border-primary pl-4 mb-6">
                Detected Pattern Types
            </h2>
            <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-5 gap-3">
                <div class="border border-archive-secondary/20 bg-archive-dark/30 p-3 text-center">
                    <span class="text-xs font-bold text-archive-heading uppercase">AFFIDAVIT</span>
                    <p class="text-[9px] text-archive-secondary/60 mt-1">sworn, notary</p>
                </div>
                <div class="border border-archive-secondary/20 bg-archive-dark/30 p-3 text-center">
                    <span class="text-xs font-bold text-archive-heading uppercase">DEPOSITION</span>
                    <p class="text-[9px] text-archive-secondary/60 mt-1">deponent, testimony</p>
                </div>
                <div class="border border-archive-secondary/20 bg-archive-dark/30 p-3 text-center">
                    <span class="text-xs font-bold text-archive-heading uppercase">REPORT</span>
                    <p class="text-[9px] text-archive-secondary/60 mt-1">findings, submitted</p>
                </div>
                <div class="border border-archive-secondary/20 bg-archive-dark/30 p-3 text-center">
                    <span class="text-xs font-bold text-archive-heading uppercase">LETTER</span>
                    <p class="text-[9px] text-archive-secondary/60 mt-1">Dear, Sincerely</p>
                </div>
                <div class="border border-archive-secondary/20 bg-archive-dark/30 p-3 text-center">
                    <span class="text-xs font-bold text-archive-heading uppercase">TRANSCRIPT</span>
                    <p class="text-[9px] text-archive-secondary/60 mt-1">Q. A. examination</p>
                </div>
                <div class="border border-archive-secondary/20 bg-archive-dark/30 p-3 text-center">
                    <span class="text-xs font-bold text-archive-heading uppercase">LIST</span>
                    <p class="text-[9px] text-archive-secondary/60 mt-1">roster, schedule</p>
                </div>
                <div class="border border-archive-secondary/20 bg-archive-dark/30 p-3 text-center">
                    <span class="text-xs font-bold text-archive-heading uppercase">STATEMENT</span>
                    <p class="text-[9px] text-archive-secondary/60 mt-1">states that, declare</p>
                </div>
                <div class="border border-archive-secondary/20 bg-archive-dark/30 p-3 text-center">
                    <span class="text-xs font-bold text-archive-heading uppercase">MEDICAL</span>
                    <p class="text-[9px] text-archive-secondary/60 mt-1">autopsy, wound</p>
                </div>
                <div class="border border-archive-secondary/20 bg-archive-dark/30 p-3 text-center">
                    <span class="text-xs font-bold text-archive-heading uppercase">POLICE</span>
                    <p class="text-[9px] text-archive-secondary/60 mt-1">officer, arrest</p>
                </div>
                <div class="border border-archive-secondary/20 bg-archive-dark/30 p-3 text-center">
                    <span class="text-xs font-bold text-archive-heading uppercase">FBI_RELATED</span>
                    <p class="text-[9px] text-archive-secondary/60 mt-1">Bureau, SA</p>
                </div>
            </div>
        </section>

        <!-- KEY FEATURES -->
        <section class="mb-12">
            <h2
                class="text-xl font-bold text-archive-heading uppercase tracking-wider border-l-4 border-primary pl-4 mb-6">
                Key Features
            </h2>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                <div class="flex gap-4 border border-archive-secondary/20 bg-archive-dark/30 p-4">
                    <div
                        class="flex-shrink-0 w-10 h-10 flex items-center justify-center bg-primary/10 text-primary border border-primary/20">
                        <span class="material-symbols-outlined text-lg">analytics</span>
                    </div>
                    <div>
                        <h3 class="font-bold text-archive-heading text-sm uppercase mb-1">Bulk Volume Analysis</h3>
                        <p class="text-xs text-archive-secondary/70">Samples pages across multiple archival volumes to identify statistically significant patterns.</p>
                    </div>
                </div>
                <div class="flex gap-4 border border-archive-secondary/20 bg-archive-dark/30 p-4">
                    <div
                        class="flex-shrink-0 w-10 h-10 flex items-center justify-center bg-primary/10 text-primary border border-primary/20">
                        <span class="material-symbols-outlined text-lg">bar_chart</span>
                    </div>
                    <div>
                        <h3 class="font-bold text-archive-heading text-sm uppercase mb-1">Pattern Frequency</h3>
                        <p class="text-xs text-archive-secondary/70">Counts occurrences of each pattern type and ranks by frequency for prioritization.</p>
                    </div>
                </div>
                <div class="flex gap-4 border border-archive-secondary/20 bg-archive-dark/30 p-4">
                    <div
                        class="flex-shrink-0 w-10 h-10 flex items-center justify-center bg-primary/10 text-primary border border-primary/20">
                        <span class="material-symbols-outlined text-lg">lightbulb</span>
                    </div>
                    <div>
                        <h3 class="font-bold text-archive-heading text-sm uppercase mb-1">Auto-Recommendations</h3>
                        <p class="text-xs text-archive-secondary/70">Suggests new document types when patterns appear 3+ times across sampled pages.</p>
                    </div>
                </div>
                <div class="flex gap-4 border border-archive-secondary/20 bg-archive-dark/30 p-4">
                    <div
                        class="flex-shrink-0 w-10 h-10 flex items-center justify-center bg-primary/10 text-primary border border-primary/20">
                        <span class="material-symbols-outlined text-lg">preview</span>
                    </div>
                    <div>
                        <h3 class="font-bold text-archive-heading text-sm uppercase mb-1">Text Previews</h3>
                        <p class="text-xs text-archive-secondary/70">Shows 200-character preview of each UNKNOWN page for quick human review.</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- API USAGE -->
        <section class="mb-12">
            <h2
                class="text-xl font-bold text-archive-heading uppercase tracking-wider border-l-4 border-primary pl-4 mb-6">
                CLI Usage
            </h2>
            <div class="bg-archive-dark/50 border border-archive-secondary/20 p-5">
                <pre class="text-[11px] font-mono text-archive-secondary/90 overflow-x-auto"><code># Run pattern discovery on Warren Commission exhibit volumes
python tools/discover_patterns.py

# Output:
# VOLUME 16
# --- Page 42 (1523 chars) ---
#   Patterns: ['AFFIDAVIT']
#   Preview: STATE OF TEXAS, COUNTY OF DALLAS. BEFORE ME...
#
# PATTERN SUMMARY
#   AFFIDAVIT           : 15
#   TRANSCRIPT          : 12
#   STATEMENT           :  8
#
# RECOMMENDATIONS
#   Consider adding AFFIDAVIT document type (15 occurrences)</code></pre>
            </div>
        </section>

        <!-- STATUS -->
        <section class="border border-emerald-500/30 bg-emerald-500/5 p-6">
            <div class="flex items-center gap-3 mb-3">
                <span class="material-symbols-outlined text-emerald-400">check_circle</span>
                <span class="font-bold text-emerald-400 uppercase tracking-wider text-sm">Status: Live</span>
            </div>
            <p class="text-xs text-archive-secondary/80 mb-3">
                The Pattern Discovery Tool is fully operational. Used to identify patterns that led to 
                WC_AFFIDAVIT, WC_EXHIBIT, and STATEMENT document types being added to the classifier.
            </p>
            <div class="flex flex-wrap gap-2 text-[9px]">
                <span class="bg-archive-dark/50 px-2 py-1 border border-archive-secondary/20">
                    <span class="text-archive-secondary/60">Script:</span>
                    <span class="text-primary">tools/discover_patterns.py</span>
                </span>
                <span class="bg-archive-dark/50 px-2 py-1 border border-archive-secondary/20">
                    <span class="text-archive-secondary/60">Depends:</span>
                    <span class="text-primary">document_classifier.py</span>
                </span>
            </div>
        </section>

    </main>

    <hr class="border-archive-secondary/20" />

    <!-- MODULAR FOOTER -->
    <div data-component="footer"></div>

    <!-- MODULAR BOTTOM NAV -->
    <nav data-component="bottom-nav" data-active="Tools"
        class="fixed bottom-0 z-50 w-full border-t border-archive-secondary/20 bg-archive-bg px-6 py-4"></nav>

    <div class="h-24"></div>

</body>

</html>
