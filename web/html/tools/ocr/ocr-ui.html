<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Primary Sources — OCR Tool</title>

    <!-- CRITICAL CSS: Prevent white flash and basic layout -->
    <style>
        :root {
            --primary: #B08B49;
            --archive-bg: #2E282A;
            --archive-secondary: #D4CFC7;
        }

        html,
        body {
            background-color: var(--archive-bg) !important;
            color: var(--archive-secondary);
            margin: 0;
            padding: 0;
        }

        /* Hide components until JS loads */
        [data-component]:not(.component-loaded) {
            opacity: 0;
            visibility: hidden;
        }
    </style>
    <link rel="stylesheet" href="../../assets/css/tailwind-prod.css">
    <link rel="stylesheet" href="../../assets/css/main.css">

    <link rel="stylesheet" href="ocr-components.css">
    <script src="../../assets/js/components.js" defer></script>
    <script src="../../assets/js/collapsible-menu.js" defer></script>
    <script src="../../assets/js/nav.js" defer></script>
</head>

<body class="bg-archive-bg text-archive-secondary font-mono">
    <!-- MODULAR HEADER -->
    <header data-component="header"
        class="sticky top-0 z-50 w-full border-b border-archive-secondary/20 bg-archive-bg/95 backdrop-blur component-loaded">
<!-- BUILD:INJECTED -->
<div class="flex h-16 items-center justify-between px-4">
    <!-- LEFT: Nav Menu + Search + Branding + Breadcrumbs (all inline) -->
    <div class="flex items-center gap-3">
        <!-- Nav Menu -->
        <div class="relative group">
            <button id="menu-toggle"
                class="flex h-10 w-10 items-center justify-center border border-archive-secondary/20 hover:bg-primary/10 transition-colors">
                <span class="material-symbols-outlined text-archive-heading">menu</span>
            </button>
        </div>

        <!-- Search -->
        <a href="../../search.html"
            class="flex h-10 w-10 items-center justify-center border border-archive-secondary/20 hover:bg-primary/10 text-archive-secondary transition-colors">
            <span class="material-symbols-outlined">search</span>
        </a>

        <!-- Branding: Title -->
        <a href="../../index.html" class="pl-4">
            <span class="text-xl font-bold tracking-[0.2em] text-archive-heading uppercase font-display">Primary
                Sources:<span class="text-primary">JFK</span></span>
        </a>

        <!-- Breadcrumbs: Shows current section (hidden on homepage via nav.js) -->
        <nav id="breadcrumb-nav" class="flex items-center gap-2 pl-3">
            <span class="material-symbols-outlined text-sm text-archive-secondary/30">chevron_right</span>
            <span id="breadcrumb-current"
                class="text-xs font-bold uppercase tracking-[0.15em] text-primary">Browse</span>
        </nav>
    </div>

    <!-- RIGHT: User Icon -->
    <div class="flex items-center">
        <button id="user-menu-toggle"
            class="flex h-10 w-10 items-center justify-center border border-archive-secondary/20 hover:bg-primary/10 transition-colors">
            <span class="material-symbols-outlined text-archive-secondary">person</span>
        </button>
    </div>
</div>
<!-- /BUILD:INJECTED -->
</header>
    <div data-component="mega-menu" class="component-loaded component-loaded">
<!-- BUILD:INJECTED -->
<!-- MEGA MENU CONTAINER -->
<div id="header-dropdown" class="mega-menu-container">

    <!-- TIER 1: HEADER (ACTIONS) -->
    <div class="mega-menu-header">
        <!-- CARD: HOME ACTION -->
        <div id="home-container" class="close-card">
            <span class="material-symbols-outlined">home</span>
            <span>HOME</span>
        </div>

        <!-- CARD: CLOSE ACTION -->
        <div id="close-container" class="close-card">
            <span class="material-symbols-outlined">close</span>
            <span>CLOSE</span>
        </div>
    </div>

    <!-- TIER 2: MAIN CONTENT (CATEGORIES) -->
    <div class="mega-menu-main">
        <!-- CARD 1: HOME & GENERAL -->
        <div class="border border-archive-secondary/20 bg-[#252021]/60 p-5">
            <div class="flex items-center gap-3 mb-4 pb-3 border-b border-archive-secondary/10">
                <span class="material-symbols-outlined text-primary">home</span>
                <h3 class="category-title font-bold text-archive-heading uppercase tracking-wider">Home & General</h3>
            </div>
            <ul class="space-y-2 text-[11px] uppercase tracking-wide">
                <li><a href="../../index.html" class="hover:text-primary transition-colors flex items-center gap-2">
                        <span class="material-symbols-outlined text-xs opacity-40">arrow_right</span>Home
                    </a></li>
                <li><a href="../../search.html" class="hover:text-primary transition-colors flex items-center gap-2">
                        <span class="material-symbols-outlined text-xs opacity-40">arrow_right</span>Search
                    </a></li>
                <li><a href="../../tools/assertion-tracker/assertion-tracker-details.html"
                        class="hover:text-primary transition-colors flex items-center gap-2">
                        <span class="material-symbols-outlined text-xs opacity-40">arrow_right</span>Assertion Based
                        Tracking
                    </a></li>
                <li><a href="../../pages/blog.html" class="hover:text-primary transition-colors flex items-center gap-2">
                        <span class="material-symbols-outlined text-xs opacity-40">arrow_right</span>Dev Blog
                    </a></li>
            </ul>
        </div>

        <!-- CARD 2: ABOUT & INFO -->
        <div class="border border-archive-secondary/20 bg-[#252021]/60 p-5">
            <div class="flex items-center gap-3 mb-4 pb-3 border-b border-archive-secondary/10">
                <span class="material-symbols-outlined text-primary">info</span>
                <h3 class="category-title font-bold text-archive-heading uppercase tracking-wider">About & Info</h3>
            </div>
            <ul class="space-y-2 text-[11px] uppercase tracking-wide">
                <li><a href="../../pages/about.html" class="hover:text-primary transition-colors flex items-center gap-2">
                        <span class="material-symbols-outlined text-xs opacity-40">arrow_right</span>About this
                        Project
                    </a></li>
                <li><a href="../../pages/features.html" class="hover:text-primary transition-colors flex items-center gap-2">
                        <span class="material-symbols-outlined text-xs opacity-40">arrow_right</span>Roadmap and
                        Features
                    </a></li>
                <li><a href="../../pages/links.html" class="hover:text-primary transition-colors flex items-center gap-2">
                        <span class="material-symbols-outlined text-xs opacity-40">arrow_right</span>Portal
                        Links
                    </a></li>
            </ul>
        </div>

        <!-- CARD 3: BROWSE ENTITIES -->
        <div class="border border-archive-secondary/20 bg-[#252021]/60 p-5">
            <div class="flex items-center gap-3 mb-4 pb-3 border-b border-archive-secondary/10">
                <span class="material-symbols-outlined text-primary">dataset</span>
                <h3 class="category-title font-bold text-archive-heading uppercase tracking-wider">Browse Entities</h3>
            </div>
            <ul class="space-y-2 text-[11px] uppercase tracking-wide">
                <li><a href="../../entities/event/event-index.html"
                        class="hover:text-primary transition-colors flex items-center gap-2">
                        <span class="material-symbols-outlined text-xs opacity-40">arrow_right</span>Events
                    </a></li>
                <li><a href="../../entities/person/person-index.html"
                        class="hover:text-primary transition-colors flex items-center gap-2">
                        <span class="material-symbols-outlined text-xs opacity-40">arrow_right</span>People
                    </a></li>
                <li><a href="../../entities/organization/org-index.html"
                        class="hover:text-primary transition-colors flex items-center gap-2">
                        <span class="material-symbols-outlined text-xs opacity-40">arrow_right</span>Organizations
                    </a></li>
                <li><a href="../../entities/place/place-index.html"
                        class="hover:text-primary transition-colors flex items-center gap-2">
                        <span class="material-symbols-outlined text-xs opacity-40">arrow_right</span>Places
                    </a></li>
                <li><a href="../../entities/object/object-index.html"
                        class="hover:text-primary transition-colors flex items-center gap-2">
                        <span class="material-symbols-outlined text-xs opacity-40">arrow_right</span>Objects
                    </a></li>
                <li><a href="../../entities/source/source-index.html"
                        class="hover:text-primary transition-colors flex items-center gap-2">
                        <span class="material-symbols-outlined text-xs opacity-40">arrow_right</span>Sources
                    </a></li>
            </ul>
        </div>

        <!-- CARD 4: RESEARCH TOOLS -->
        <div class="border border-archive-secondary/20 bg-[#252021]/60 p-5">
            <div class="flex items-center gap-3 mb-4 pb-3 border-b border-archive-secondary/10">
                <span class="material-symbols-outlined text-primary">construction</span>
                <h3 class="category-title font-bold text-archive-heading uppercase tracking-wider">Research Tools</h3>
            </div>
            <ul class="space-y-2 text-[11px] uppercase tracking-wide">
                <li><a href="../../tools/tools-index.html"
                        class="hover:text-primary transition-colors flex items-center gap-2">
                        <span class="material-symbols-outlined text-xs opacity-40">arrow_right</span>All Tools
                    </a></li>
                <li><a href="../../tools/ocr/ocr-ui.html"
                        class="hover:text-primary transition-colors flex items-center gap-2">
                        <span class="material-symbols-outlined text-xs opacity-40">arrow_right</span>OCR Scanner
                    </a></li>
                <li><a href="../../tools/pdf-viewer/pdf-viewer-ui.html"
                        class="hover:text-primary transition-colors flex items-center gap-2">
                        <span class="material-symbols-outlined text-xs opacity-40">arrow_right</span>PDF Viewer
                    </a></li>
                <li><a href="../../tools/classifier/classifier-ui.html"
                        class="hover:text-primary transition-colors flex items-center gap-2">
                        <span class="material-symbols-outlined text-xs opacity-40">arrow_right</span>Document
                        Classifier
                    </a></li>
                <li><a href="../../tools/citation/citation-details.html"
                        class="hover:text-primary transition-colors flex items-center gap-2">
                        <span class="material-symbols-outlined text-xs opacity-40">arrow_right</span>Citation
                        Generator
                    </a></li>
                <li><a href="../../tools/matcher/matcher-details.html"
                        class="hover:text-primary transition-colors flex items-center gap-2">
                        <span class="material-symbols-outlined text-xs opacity-40">arrow_right</span>Entity
                        Matcher
                    </a></li>
                <li><a href="../../tools/analyzer/analyzer-details.html"
                        class="hover:text-primary transition-colors flex items-center gap-2">
                        <span class="material-symbols-outlined text-xs opacity-40">arrow_right</span>Document
                        Analyzer
                    </a></li>
                <li><a href="../../tools/research/research-details.html"
                        class="hover:text-primary transition-colors flex items-center gap-2">
                        <span class="material-symbols-outlined text-xs opacity-40">arrow_right</span>Research
                        Tools
                    </a></li>
            </ul>
        </div>

        <!-- CARD 5: DISCOVERY -->
        <div class="border border-archive-secondary/20 bg-[#252021]/60 p-5">
            <div class="flex items-center gap-3 mb-4 pb-3 border-b border-archive-secondary/10">
                <span class="material-symbols-outlined text-primary">auto_awesome</span>
                <h3 class="category-title font-bold text-archive-heading uppercase tracking-wider">Discovery</h3>
            </div>
            <ul class="space-y-2 text-[11px] uppercase tracking-wide">
                <li><a href="../../exploration/otd.html"
                        class="hover:text-primary transition-colors flex items-center gap-2">
                        <span class="material-symbols-outlined text-xs opacity-40">arrow_right</span>On This Day
                    </a></li>
                <li><a href="../../exploration/random.html"
                        class="hover:text-primary transition-colors flex items-center gap-2">
                        <span class="material-symbols-outlined text-xs opacity-40">arrow_right</span>Six Degrees
                    </a></li>
                <li><a href="../../exploration/witness-atlas.html"
                        class="hover:text-primary transition-colors flex items-center gap-2">
                        <span class="material-symbols-outlined text-xs opacity-40">arrow_right</span>Witness
                        Atlas
                    </a></li>
            </ul>
        </div>

        <!-- CARD 6: TOOL DOCUMENTATION -->
        <div class="border border-archive-secondary/20 bg-[#252021]/60 p-5">
            <div class="flex items-center gap-3 mb-4 pb-3 border-b border-archive-secondary/10">
                <span class="material-symbols-outlined text-primary">description</span>
                <h3 class="category-title font-bold text-archive-heading uppercase tracking-wider">Tool Documentation
                </h3>
            </div>
            <ul class="space-y-2 text-[11px] uppercase tracking-wide">
                <li><a href="../../tools/ocr/ocr-details.html"
                        class="hover:text-primary transition-colors flex items-center gap-2">
                        <span class="material-symbols-outlined text-xs opacity-40">arrow_right</span>OCR
                        Documentation
                    </a></li>
                <li><a href="../../tools/pdf-viewer/pdf-viewer-details.html"
                        class="hover:text-primary transition-colors flex items-center gap-2">
                        <span class="material-symbols-outlined text-xs opacity-40">arrow_right</span>PDF Viewer
                        Docs
                    </a></li>
                <li><a href="../../tools/classifier/classifier-details.html"
                        class="hover:text-primary transition-colors flex items-center gap-2">
                        <span class="material-symbols-outlined text-xs opacity-40">arrow_right</span>Classifier
                        Docs
                    </a></li>
            </ul>
        </div>
    </div>

    <!-- TIER 3: FOOTER (SOCIAL) -->
    <div class="mega-menu-footer">
        <div class="social-grid">
            <a href="https://youtube.com" target="_blank" class="social-link">
                <div class="close-card">
                    <svg viewBox="0 0 24 24">
                        <path
                            d="M23.498 6.186a3.016 3.016 0 0 0-2.122-2.136C19.505 3.545 12 3.545 12 3.545s-7.505 0-9.377.505A3.017 3.017 0 0 0 .502 6.186C0 8.07 0 12 0 12s0 3.93.502 5.814a3.016 3.016 0 0 0 2.122 2.136c1.871.505 9.376.505 9.376.505s7.505 0 9.377-.505a3.015 3.015 0 0 0 2.122-2.136C24 15.93 24 12 24 12s0-3.93-.502-5.814zM9.545 15.568V8.432L15.818 12l-6.273 3.568z" />
                    </svg>
                    <span>YOUTUBE</span>
                </div>
            </a>
            <a href="https://tiktok.com" target="_blank" class="social-link">
                <div class="close-card">
                    <svg viewBox="0 0 24 24">
                        <path
                            d="M12.525.02c1.31-.02 2.61-.01 3.91-.02.08 1.53.63 3.09 1.75 4.17 1.12 1.11 2.7 1.62 4.24 1.79v4.03c-1.44-.06-2.89-.35-4.2-.97-.57-.26-1.1-.59-1.62-.93-.01 2.92.01 5.84-.02 8.75-.08 1.4-.54 2.79-1.35 3.94-1.31 1.92-3.58 3.17-5.91 3.21-1.43.08-2.86-.31-4.08-1.03-2.02-1.19-3.44-3.37-3.65-5.71-.02-.5-.03-1-.01-1.49.18-1.9 1.12-3.72 2.58-4.96 1.66-1.44 3.98-2.13 6.15-1.72.02 1.48-.04 2.96-.04 4.44-.9-.32-1.98-.23-2.81.33-.85.51-1.44 1.43-1.58 2.41-.14.99.12 2.07.72 2.87.64.83 1.65 1.38 2.7 1.48 1.55.15 3.16-.56 3.92-1.9.17-.28.28-.57.35-.88.07-1.01.05-2.03.06-3.04l.01-14.52z" />
                    </svg>
                    <span>TIKTOK</span>
                </div>
            </a>
            <a href="https://instagram.com" target="_blank" class="social-link">
                <div class="close-card">
                    <svg viewBox="0 0 24 24">
                        <path
                            d="M12 2.163c3.204 0 3.584.012 4.85.07 1.366.062 1.764.319 2.116.67s.608.75.67 2.116c.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.062 1.366-.319 1.764-.67 2.116s-.75.608-2.116.67c-1.264.058-1.645.069-4.849.069-3.204 0-3.584-.012-4.849-.069-1.366-.062-1.764-.319-2.116-.67s-.608-.75-.67-2.116c-.058-1.265-.069-1.645-.069-4.849 0-3.204.012-3.584.069-4.849.062-1.366.319-1.764.67-2.116s.75-.608 2.116-.67c1.265-.058 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-1.325.06-2.23.272-3.022.58a5.167 5.167 0 0 0-1.87 1.217 5.167 5.167 0 0 0-1.217 1.87c-.308.792-.52 1.697-.58 3.022-.058 1.279-.072 1.687-.072 4.947s.014 3.668.072 4.947c.06 1.325.272 2.23.58 3.022a5.167 5.167 0 0 0 1.217 1.87 5.167 5.167 0 0 0 1.87 1.217c.792.308 1.697.52 3.022.58 1.279.058 1.687.072 4.947.072s3.668-.014 4.947-.072c1.325-.06 2.23-.272 3.022-.58a5.167 5.167 0 0 0 1.87-1.217 5.167 5.167 0 0 0 1.217-1.87c.308-.792.52-1.697.58-3.022.058-1.28.072-1.688.072-4.947s-.014-3.668-.072-4.947c-.06-1.325-.272-2.23-.58-3.022a5.167 5.167 0 0 0-1.217-1.87 5.167 5.167 0 0 0-1.87-1.217c-.792-.308-1.697-.52-3.022-.58-1.28-.058-1.688-.072-4.947-.072zm0 5.838a6.162 6.162 0 1 0 0 12.324 6.162 6.162 0 0 0 0-12.324zM12 16a3.838 3.838 0 1 1 0-7.676A3.838 3.838 0 0 1 12 16zm6.406-11.845a1.44 1.44 0 1 0 0 2.881 1.44 1.44 0 0 0 0-2.881z" />
                    </svg>
                    <span>INSTAGRAM</span>
                </div>
            </a>
            <a href="https://x.com" target="_blank" class="social-link">
                <div class="close-card">
                    <svg viewBox="0 0 24 24">
                        <path
                            d="M18.901 1.153h3.68l-8.04 9.19L24 22.846h-7.406l-5.8-7.584-6.638 7.584H.474l8.6-9.83L0 1.154h7.594l5.243 6.932 6.064-6.932zm-1.292 19.494h2.039L6.486 3.24H4.298l13.311 17.407z" />
                    </svg>
                    <span>X</span>
                </div>
            </a>
        </div>
    </div>

</div>
<!-- /BUILD:INJECTED -->
</div>

    <!-- Main Content -->
    <main class="w-full max-w-3xl mx-auto p-6">
        <!-- Tabs -->
        <div class="repo-tabs mb-8 flex border-b border-archive-secondary/20">
            <button id="tab-scan" class="tab-btn active" data-tab="scan">
                <span class="text-base font-bold uppercase tracking-wider text-archive-heading">
                    Scan
                </span>
                <span id="queue-badge" class="queue-badge hidden">0</span>
            </button>
            <button id="tab-review" class="tab-btn" data-tab="review">
                <span class="text-base font-bold uppercase tracking-wider text-archive-heading">
                    Review
                </span>
            </button>
            <button id="tab-guide" class="tab-btn" data-tab="guide">
                <span class="text-base font-bold uppercase tracking-wider text-archive-heading">
                    Guide
                </span>
            </button>
        </div>

        <!-- SCAN TAB -->
        <section id="tab-content-scan" class="tab-content active">
            <!-- Drop Zone -->
            <div id="drop-zone" class="drop-zone border border-archive-secondary/20 bg-archive-dark/50 mb-6">
                <div class="drop-zone-content">
                    <svg class="drop-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5"
                            d="M12 16v-4m0 0V8m0 4H8m0 0h4m0 0h4m0 0v4m0 0h-4m0 0h4m0 0H8m0 0H4m0 0h4" />
                    </svg>
                    <p class="text-archive-secondary text-base">Drop PDFs, Images, or Archives (.zip, .tar) here</p>
                </div>
                <input id="file-input" type="file"
                    accept=".pdf,.jpg,.jpeg,.png,.tiff,.webp,.heic,.heif,.zip,.tar,.gz,.tgz,.bz2" multiple hidden>
            </div>

            <!-- Queue List -->
            <div class="mb-6">
                <div class="flex justify-between items-center mb-4">
                    <h3
                        class="text-lg font-bold text-archive-heading uppercase tracking-wider border-l-4 border-primary pl-4">
                        Queue
                    </h3>
                    <div class="flex gap-2">
                        <button id="btn-clear-completed"
                            class="text-[10px] font-bold uppercase tracking-widest text-archive-secondary/60 hover:text-primary transition-all flex items-center gap-1">
                            <span class="material-symbols-outlined text-sm">cleaning_services</span> Clear Completed
                        </button>
                        <button id="btn-clear-all"
                            class="text-[10px] font-bold uppercase tracking-widest text-archive-secondary/60 hover:text-archive-secondary transition-all flex items-center gap-1">
                            <span class="material-symbols-outlined text-sm">delete_sweep</span> Clear All
                        </button>
                    </div>
                </div>
                <div id="queue-list" class="bg-archive-dark/50 border border-archive-secondary/20 rounded-none mb-6">
                    <div class="empty-state">
                        <p class="text-archive-secondary text-sm">No files queued</p>
                    </div>
                </div>
            </div>

            <!-- Log & Summary Output -->
            <div class="mb-6">
                <div class="flex justify-between items-end mb-4">
                    <h3
                        class="text-lg font-bold text-archive-heading uppercase tracking-wider border-l-4 border-primary pl-4">
                        Process Log
                    </h3>
                    <div id="session-summary" class="flex gap-4 text-[9px] uppercase tracking-tighter opacity-80">
                        <div class="flex flex-col items-end">
                            <span class="text-primary/60">Total Docs</span>
                            <span id="stat-total" class="font-bold text-archive-heading">0</span>
                        </div>
                        <div class="flex flex-col items-end">
                            <span class="text-primary/60">Avg Conf</span>
                            <span id="stat-confidence" class="font-bold text-archive-heading">0%</span>
                        </div>
                        <div class="flex flex-col items-end">
                            <span class="text-primary/60">Succeeded</span>
                            <span id="stat-success" class="font-bold text-archive-heading">0</span>
                        </div>
                    </div>
                </div>
                <div id="log-output"
                    class="bg-archive-dark/50 border border-archive-secondary/20 p-4 font-mono text-xs text-archive-secondary h-32 overflow-y-auto">
                    <p class="text-archive-secondary/60">Waiting to start processing...</p>
                </div>
            </div>

            <!-- Settings Section -->
            <div class="settings-container border border-archive-secondary/20 bg-archive-surface/60 p-6 mb-8">
                <h3
                    class="text-lg font-bold text-archive-heading uppercase tracking-wider border-l-4 border-primary pl-4 mb-6">
                    Settings
                </h3>

                <!-- Backend Selection -->
                <div class="setting-group mb-4">
                    <label class="text-xs font-bold uppercase tracking-wider text-primary">Backend</label>
                    <div class="flex gap-4 mt-2">
                        <label class="flex items-center gap-2">
                            <input type="radio" name="backend" value="wsl" checked class="hidden peer">
                            <div class="w-4 h-4 border border-primary peer-checked:bg-primary"></div>
                            <span class="text-sm">WSL (ocrmypdf)</span>
                        </label>
                        <label class="flex items-center gap-2">
                            <input type="radio" name="backend" value="python" class="hidden peer">
                            <div class="w-4 h-4 border border-primary peer-checked:bg-primary"></div>
                            <span class="text-sm">Python (pytesseract)</span>
                        </label>
                    </div>
                </div>

                <div class="setting-group mb-4">
                    <label class="text-xs font-bold uppercase tracking-wider text-primary">Output Format</label>
                    <div class="flex gap-4 mt-2">
                        <label class="flex items-center gap-2">
                            <input type="checkbox" id="output-pdf" checked class="hidden peer">
                            <div class="w-4 h-4 border border-primary peer-checked:bg-primary"></div>
                            <span class="text-sm">Searchable PDF</span>
                        </label>
                        <label class="flex items-center gap-2">
                            <input type="checkbox" id="output-txt" class="hidden peer">
                            <div class="w-4 h-4 border border-primary peer-checked:bg-primary"></div>
                            <span class="text-sm">Plain Text</span>
                        </label>
                        <label class="flex items-center gap-2">
                            <input type="checkbox" id="output-md" checked class="hidden peer">
                            <div class="w-4 h-4 border border-primary peer-checked:bg-primary"></div>
                            <span class="text-sm">Markdown (.md)</span>
                        </label>
                        <label class="flex items-center gap-2">
                            <input type="checkbox" id="output-html" checked class="hidden peer">
                            <div class="w-4 h-4 border border-primary peer-checked:bg-primary"></div>
                            <span class="text-sm">Archival HTML</span>
                        </label>
                    </div>
                </div>

                <!-- OCR Options -->
                <div class="setting-group mb-6">
                    <label class="text-xs font-bold uppercase tracking-wider text-primary">Options</label>
                    <div class="flex gap-4 mt-2 flex-wrap">
                        <label class="flex items-center gap-2">
                            <input type="checkbox" id="option-deskew" checked class="hidden peer">
                            <div class="w-4 h-4 border border-primary peer-checked:bg-primary"></div>
                            <span class="text-sm">Deskew</span>
                        </label>
                        <label class="flex items-center gap-2">
                            <input type="checkbox" id="option-clean" checked class="hidden peer">
                            <div class="w-4 h-4 border border-primary peer-checked:bg-primary"></div>
                            <span class="text-sm">Clean</span>
                        </label>
                        <label class="flex items-center gap-2">
                            <input type="checkbox" id="option-force" class="hidden peer">
                            <div class="w-4 h-4 border border-primary peer-checked:bg-primary"></div>
                            <span class="text-sm">Force OCR</span>
                        </label>
                    </div>
                </div>

                <!-- Save To Directory -->
                <div class="setting-group">
                    <label class="text-xs font-bold uppercase tracking-wider text-primary block mb-2">Save to</label>
                    <div class="flex gap-2">
                        <input type="text" id="output-dir" readonly
                            class="flex-1 bg-archive-bg border border-primary px-3 py-2 text-archive-secondary text-sm cursor-text"
                            title="Double-click to copy">
                        <button class="btn-secondary btn-sm" onclick="changeOutputDir()">Change...</button>
                        <button class="btn-primary btn-sm" onclick="openOutputFolder()">Open</button>
                    </div>
                </div>
            </div>

            <!-- Action Buttons -->
            <div class="flex gap-4 justify-center">
                <button id="btn-start" class="btn-primary btn-lg">Start OCR</button>
                <button id="btn-cancel" class="btn-secondary btn-lg" disabled>Cancel</button>
            </div>
        </section>

        <!-- REVIEW TAB -->
        <section id="tab-content-review" class="tab-content hidden">
            <div class="settings-container border border-archive-secondary/20 bg-archive-surface/60 p-6 mb-8">
                <div class="flex justify-between items-center mb-6">
                    <h3
                        class="text-lg font-bold text-archive-heading uppercase tracking-wider border-l-4 border-emerald-400 pl-4">
                        Document Gallery
                    </h3>
                    <button onclick="renderReviewGrid()"
                        class="text-[10px] font-bold uppercase tracking-widest text-primary hover:text-archive-heading transition-all">
                        <span class="material-symbols-outlined text-sm align-middle">refresh</span> Refresh Gallery
                    </button>
                </div>

                <div id="review-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4">
                    <!-- Review cards will be injected here -->
                    <div class="col-span-full py-12 text-center opacity-40">
                        <span class="material-symbols-outlined text-4xl mb-2">folder_open</span>
                        <p class="text-sm">No processed documents found in current session.</p>
                        <p class="text-[10px] uppercase tracking-widest mt-1">Start a scan to populate the gallery</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- GUIDE TAB -->
        <section id="tab-content-guide" class="tab-content hidden">
            <!-- Quick Start -->
            <div class="settings-container border border-archive-secondary/20 bg-archive-surface/60 p-6 mb-6">
                <h3
                    class="text-lg font-bold text-archive-heading uppercase tracking-wider border-l-4 border-primary pl-4 mb-4">
                    Quick Start
                </h3>
                <ol class="space-y-3 text-sm">
                    <li class="flex gap-3">
                        <span class="text-primary font-bold">1.</span>
                        <span><strong class="text-archive-heading">Add Files</strong> — Drag PDFs or images onto the
                            drop zone. Archives (.zip, .tar) are automatically unrolled.</span>
                    </li>
                    <li class="flex gap-3">
                        <span class="text-primary font-bold">2.</span>
                        <span><strong class="text-archive-heading">Configure</strong> — Choose your backend (WSL for
                            best quality) and output formats.</span>
                    </li>
                    <li class="flex gap-3">
                        <span class="text-primary font-bold">3.</span>
                        <span><strong class="text-archive-heading">Process</strong> — Click "Start OCR" and monitor the
                            real-time queue.</span>
                    </li>
                    <li class="flex gap-3">
                        <span class="text-primary font-bold">4.</span>
                        <span><strong class="text-archive-heading">Extract</strong> — Use the <strong
                                class="text-primary">Workbench</strong> and <strong
                                class="text-emerald-400">Review</strong> tools to finalize data extraction and
                            classification.</span>
                    </li>
                </ol>
            </div>

            <!-- Backend Options -->
            <div class="settings-container border border-archive-secondary/20 bg-archive-surface/60 p-6 mb-6">
                <h3
                    class="text-lg font-bold text-archive-heading uppercase tracking-wider border-l-4 border-primary pl-4 mb-4">
                    Backend Options
                </h3>
                <div class="space-y-4">
                    <div class="border-l-2 border-primary/30 pl-4">
                        <h4 class="text-sm font-bold text-archive-heading uppercase tracking-wide mb-1">
                            <span class="text-primary">WSL</span> (ocrmypdf)
                        </h4>
                        <p class="text-sm text-archive-secondary/80 mb-2">
                            High-quality OCR using the industry-standard ocrmypdf tool running in Windows Subsystem for
                            Linux.
                        </p>
                        <ul class="text-xs space-y-1 text-archive-secondary/60">
                            <li>• Best accuracy for archival documents</li>
                            <li>• Creates searchable PDFs with invisible text layer</li>
                            <li>• Supports advanced preprocessing (deskew, clean)</li>
                            <li>• Requires WSL with ocrmypdf installed</li>
                        </ul>
                    </div>
                    <div class="border-l-2 border-archive-secondary/30 pl-4">
                        <h4 class="text-sm font-bold text-archive-heading uppercase tracking-wide mb-1">
                            <span class="text-archive-secondary">Python</span> (pytesseract)
                        </h4>
                        <p class="text-sm text-archive-secondary/80 mb-2">
                            Windows-native OCR using Python's pytesseract wrapper for Tesseract.
                        </p>
                        <ul class="text-xs space-y-1 text-archive-secondary/60">
                            <li>• Faster setup — no WSL required</li>
                            <li>• Outputs plain text extraction</li>
                            <li>• Good for quick text extraction tasks</li>
                            <li>• Requires Tesseract OCR installed on Windows</li>
                        </ul>
                    </div>
                </div>
            </div>

            <!-- Output Formats -->
            <div class="settings-container border border-archive-secondary/20 bg-archive-surface/60 p-6 mb-6">
                <h3
                    class="text-lg font-bold text-archive-heading uppercase tracking-wider border-l-4 border-primary pl-4 mb-4">
                    Output Formats
                </h3>
                <div class="space-y-3">
                    <div class="flex gap-4 items-start">
                        <span class="material-symbols-outlined text-primary text-xl">picture_as_pdf</span>
                        <div>
                            <h4 class="text-sm font-bold text-archive-heading">Searchable PDF</h4>
                            <p class="text-xs text-archive-secondary/70">Original document with an invisible text layer.
                                Allows selection and search while preserving archival appearance.</p>
                        </div>
                    </div>
                    <div class="flex gap-4 items-start">
                        <span class="material-symbols-outlined text-primary text-xl">description</span>
                        <div>
                            <h4 class="text-sm font-bold text-archive-heading">Plain Text (.txt) / Markdown (.md)</h4>
                            <p class="text-xs text-archive-secondary/70">Raw extracted text or structured research notes
                                with preserved archival metadata.</p>
                        </div>
                    </div>
                    <div class="flex gap-4 items-start">
                        <span class="material-symbols-outlined text-primary text-xl">html</span>
                        <div>
                            <h4 class="text-sm font-bold text-archive-heading">Archival HTML</h4>
                            <p class="text-xs text-archive-secondary/70">Visual document reconstruction. Preserves
                                layout, column structure, and proportional font scaling for browser research.</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Processing Options -->
            <div class="settings-container border border-archive-secondary/20 bg-archive-surface/60 p-6 mb-6">
                <h3
                    class="text-lg font-bold text-archive-heading uppercase tracking-wider border-l-4 border-primary pl-4 mb-4">
                    Processing Options
                </h3>
                <div class="space-y-3">
                    <div class="flex gap-4 items-start">
                        <span class="material-symbols-outlined text-primary text-xl">batch_prediction</span>
                        <div>
                            <h4 class="text-sm font-bold text-archive-heading">Deep Narrative Analysis</h4>
                            <p class="text-xs text-archive-secondary/70">Segments document content into logical blocks
                                (Memos, Headers, Body) and identifies speakers/authors automatically.</p>
                        </div>
                    </div>
                    <div class="flex gap-4 items-start">
                        <span class="material-symbols-outlined text-primary text-xl">fingerprint</span>
                        <div>
                            <h4 class="text-sm font-bold text-archive-heading">Fuzzy Entity Linking</h4>
                            <p class="text-xs text-archive-secondary/70">Uses Levenshtein algorithms to match OCR text
                                against known People, Places, and Organizations with real-time confidence scores.</p>
                        </div>
                    </div>
                    <div class="flex gap-4 items-start">
                        <span class="material-symbols-outlined text-primary text-xl">construction</span>
                        <div>
                            <h4 class="text-sm font-bold text-archive-heading">Extraction Workbench</h4>
                            <p class="text-xs text-archive-secondary/70">Dual-pane environment for manual verification.
                                Syncs text selection with original PDF coordinates to ensure 100% accuracy.</p>
                        </div>
                    </div>
                    <div class="flex gap-4 items-start">
                        <span class="material-symbols-outlined text-emerald-400 text-xl">fact_check</span>
                        <div>
                            <h4 class="text-sm font-bold text-archive-heading">Classifier Review</h4>
                            <p class="text-xs text-archive-secondary/70">Visualizing document categorization. Confirm
                                that the tool correctly identified the record type (e.g., FBI Airtel vs CIA Cable).</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Tips -->
            <div class="settings-container border border-primary/30 bg-archive-dark/50 p-6">
                <h3
                    class="text-lg font-bold text-archive-heading uppercase tracking-wider border-l-4 border-primary pl-4 mb-4">
                    Tips for Best Results
                </h3>
                <ul class="space-y-2 text-sm text-archive-secondary/80">
                    <li class="flex gap-2">
                        <span class="text-primary">•</span>
                        <span><strong class="text-archive-heading">Batch processing</strong> — Queue multiple files and
                            process overnight for large collections</span>
                    </li>
                    <li class="flex gap-2">
                        <span class="text-primary">•</span>
                        <span><strong class="text-archive-heading">Quality check</strong> — Test a few pages before
                            processing an entire collection</span>
                    </li>
                    <li class="flex gap-2">
                        <span class="text-primary">•</span>
                        <span><strong class="text-archive-heading">Use WSL</strong> — For archival documents, WSL
                            backend provides significantly better accuracy</span>
                    </li>
                    <li class="flex gap-2">
                        <span class="text-primary">•</span>
                        <span><strong class="text-archive-heading">Enable both options</strong> — Deskew + Clean
                            together work best on old photocopies</span>
                    </li>
                    <li class="flex gap-2">
                        <span class="text-primary">•</span>
                        <span><strong class="text-archive-heading">Output directory</strong> — Double-click the path to
                            copy it to your clipboard</span>
                    </li>
                </ul>
            </div>
        </section>
    </main>

    <!-- Modals -->
    <div id="modal-overlay" class="modal-overlay">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="modal-title">Modal Title</h2>
                <button class="btn-close-modal" id="modal-close">×</button>
            </div>
            <div class="modal-body" id="modal-body">
                <!-- Content here -->
            </div>
            <div class="modal-footer">
                <button class="btn-primary btn-sm" id="modal-ok">OK</button>
            </div>
        </div>
    </div>

    <hr class="border-archive-secondary/20" />

    <!-- MODULAR FOOTER -->
    <div data-component="footer" class="component-loaded component-loaded">
<!-- BUILD:INJECTED -->
<footer class="border-t border-archive-secondary/10 bg-archive-dark px-6 py-12">
    <div class="mb-12">
        <div class="mb-4 flex items-center gap-2">
            <span class="material-symbols-outlined text-primary">account_balance</span>
            <span class="text-sm font-bold uppercase tracking-[0.2em] text-archive-heading font-display">Primary
                Sources</span>
        </div>
        <p class="max-w-xl text-[10px] leading-relaxed text-archive-secondary uppercase opacity-60">
            This archive presents primary source materials without editorial interpretation. All materials are
            primary sources provided for the purpose of scholarly research, education, and public historical record.
        </p>
    </div>
    <nav
        class="mb-8 grid grid-cols-2 sm:grid-cols-5 gap-y-4 text-[10px] font-bold uppercase tracking-widest text-archive-secondary">
        <a class="hover:text-primary transition-colors" href="../../sitemap.html">Sitemap</a>
        <a class="hover:text-primary transition-colors" href="#">Disclaimer</a>
        <a class="hover:text-primary transition-colors" href="#">Privacy Policy</a>
        <a class="hover:text-primary transition-colors" href="#">Terms of Use</a>
        <a class="hover:text-primary transition-colors" href="#">Contact Archive</a>
    </nav>
    <div class="border-t border-archive-secondary/5 pt-6">
        <p class="text-[9px] text-archive-secondary opacity-40 uppercase tracking-widest">
            © 2026 Primary Sources. All rights reserved. Managed by the Independent Historical Preservation
            Group.
        </p>
    </div>
</footer>
<!-- /BUILD:INJECTED -->
</div>

    <!-- MODULAR BOTTOM NAV -->
    <nav data-component="bottom-nav" data-active="Tools"
        class="fixed bottom-0 z-50 w-full border-t border-archive-secondary/20 bg-archive-bg px-6 py-4 component-loaded">
<!-- BUILD:INJECTED -->
<!-- 
  CRITICAL INSTRUCTION FOR AI AGENTS: 
  DO NOT MODIFY THIS NAVIGATION STRUCTURE, ICONS, OR LINKS UNLESS EXPLICITLY INSTRUCTED BY THE USER.
  THIS IS THE MASTER GLOBAL NAVIGATION COMPONENT.
-->
<div class="grid grid-cols-5 w-full">
    <a href="../../index.html"
        class="flex flex-col items-center justify-center gap-1 py-1 hover:text-primary transition-colors"
        style="color:rgba(212,207,199,0.4)">
        <span class="material-symbols-outlined" style="font-size:1.5rem">home</span>
        <span style="font-size:8px;font-weight:700;text-transform:uppercase;letter-spacing:0.12em">Home</span>
    </a>
    <a href="../../entities/person/person-index.html"
        class="flex flex-col items-center justify-center gap-1 py-1 hover:text-primary transition-colors"
        style="color:rgba(212,207,199,0.4)">
        <span class="material-symbols-outlined" style="font-size:1.5rem">groups</span>
        <span style="font-size:8px;font-weight:700;text-transform:uppercase;letter-spacing:0.12em">People</span>
    </a>
    <a href="../../entities/event/event-index.html"
        class="flex flex-col items-center justify-center gap-1 py-1 hover:text-primary transition-colors"
        style="color:rgba(212,207,199,0.4)">
        <span class="material-symbols-outlined" style="font-size:1.5rem">event</span>
        <span style="font-size:8px;font-weight:700;text-transform:uppercase;letter-spacing:0.12em">Events</span>
    </a>
    <a href="../../pages/about.html"
        class="flex flex-col items-center justify-center gap-1 py-1 hover:text-primary transition-colors"
        style="color:rgba(212,207,199,0.4)">
        <span class="material-symbols-outlined" style="font-size:1.5rem">info</span>
        <span style="font-size:8px;font-weight:700;text-transform:uppercase;letter-spacing:0.12em">About</span>
    </a>
    <a href="../../pages/links.html"
        class="flex flex-col items-center justify-center gap-1 py-1 hover:text-primary transition-colors"
        style="color:rgba(212,207,199,0.4)">
        <span class="material-symbols-outlined" style="font-size:1.5rem">link</span>
        <span style="font-size:8px;font-weight:700;text-transform:uppercase;letter-spacing:0.12em">Links</span>
    </a>
</div>
<!-- /BUILD:INJECTED -->
</nav>

    <div class="h-24"></div>

    <script src="ocr-gui.js"></script>
</body>

</html>